---
title: Better performance with smaller and faster Angular applications using Spring Boot and Tomcat
date: 2017-02-20T22:45:17+00:00
author: Marco Molteni
layout: post
permalink: /2017/02/20/better-performance-with-smaller-and-faster-angular-applications-using-spring-boot-and-tomcat/
image: /wp-content/uploads/2017/03/header-springboot-100x23.png
main-class: 'spring'
color: '#7AAB13'
categories:
  - Angular
  - AngularJS
  - java
  - performance
  - Spring
  - Spring Boot
tags:
  - Angular
  - Java
  - Spring
---
_Problem: </strong>the size of our Angular application is too big and it takes too much time to download. How to reduce the size of the application?_

Solution: one of the most common solutions is to use <a href="https://webpack.github.io">webpack</a> that optimise our code and reduce eliminates the useless libraries and empty spaces.

A second important help can come from our <strong>webserver</strong>, the browsers can open <strong>compressed files</strong> (<a href="https://en.wikipedia.org/wiki/HTTP_compression">HTTP compression</a>).

This could have an huge impact when our application is accessed by browser located in different continents with big latency.
    
Apache and Ngix allow easily to compress your static content and send it to the client browser if this is able to handle gzip files. How to do the same in <strong>Tomcat</strong>?
    
Tomcat allows to configure the compression through the server.xml file, e.g.:
     
_We reduced the size of the application from 2.1 MB to 876 KB_

        
 ``` xml    
        <Connector port="8080"
         compression="on"
         compressionMinSize="2048"
         compressableMimeType=
            "text/html,text/xml,text/plain,
             text/css,text/javascript,text/json,
             application/x-javascript,
             application/javascript,application/json">
             
```
        
"ok but we are using Spring Boot with Tomcat Embedded ?"; no problem ;), here an example of implementation:


```java
@Component
public class TomcatCustomizer 
        implements EmbeddedServletContainerCustomizer {

        private static String mimeTypes[] = {"text/html", 
             "text/plain", "text/xml", "text/css", "text/javascript", 
             "application/javascript"};

        @Override
        public void customize(ConfigurableEmbeddedServletContainer 
            configurableEmbeddedServletContainer) {

            Compression compression = new Compression();
            compression.setEnabled(true);

            compression.setMimeTypes(mimeTypes);
            configurableEmbeddedServletContainer
                .setCompression(compression);
    }
}
```
        
Adding this code to our example application online: https://angular.cafe we reduce the size of the application transferred from <span style="color: #0000ff;">2.6 MB</span> to<span style="color: #0000ff;"> 876 kb</span>. The vendor.js file generated by webpack is less than 30% the size of the original (from 2.1 MB to 572 kb).

Here the new size of the website after the change:
<img class="alignnone wp-image-902 size-full" src="{{site.baseurl}}/assets/img/uploads/2017/02/compress.png" data-recalc-dims="1" />

Here the results showed by Mozilla, we can see the transferred size and the real size of the files:
<img class="alignnone wp-image-902 size-full" src="{{site.baseurl}}/assets/img/uploads/2017/02/compress_mozilla.png" data-recalc-dims="1" />

Here the screenshots before the Http compression:
<img class="alignnone wp-image-902 size-full" src="{{site.baseurl}}/assets/img/uploads/2017/02/compress_2_6.png" data-recalc-dims="1" />
<img class="alignnone wp-image-902 size-full" src="{{site.baseurl}}/assets/img/uploads/2017/02/firefox_or.png" data-recalc-dims="1" />
